<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Single Linked List using Array</title>
</head>
<body>
<script>
    function Linkedlist(){
        this.head= null;
    };

    Linkedlist.prototype.isEmpty = function(){
        if( this.head === null){
            return true;
        }
        else{
            return false;
        }
    };
    Linkedlist.prototype.size = function(){
        var current = this.head;
        var count = 0;
        while(current!= null){
            current = current.next;
            count ++;
        }
        return count;
    };
    // prepand method - add the element before head node - In this case add node before [10]  Node = [10] -> [11] -> [12]
    Linkedlist.prototype.prepand = function(val){
        var newNode = {
            data : val,
            next : this.head
        }
        this.head = newNode;
    };
    // prepand method - add the element after the end node - In this case add node after [12]  Node = [10] -> [11] -> [12]
    // We can also called stack using linked list because we push/add element to the end of the linked list
    Linkedlist.prototype.append = function(val){
        var newNode = {
            data: val,
            next : null
        };
        if(this.isEmpty()){
            this.head = newNode;
            return;
        }
        var current = this.head;
        while(current.next !==null){
            current = current.next;
        }
        current.next = newNode;
    };
    // check value is in array or not
    Linkedlist.prototype.contain = function(val){
        var current = this.head;
        while(current!= null){
            if(current.data === val){
                return true;
            }
            current = current.next;
        }
        return false;
    }
    // Remove element by using value method
    Linkedlist.prototype.remove = function(val){
        if(!this.contain(val)){
            return;
        }
        if(this.head.data === val){
            this.head = this.head.next;
            return;
        }
        var prev = null;
        var curr = this.head;
        while(curr.data !== val){
            prev = curr;
            curr = curr.next;
        }
        prev.next = curr.next;
    }

    // Find the middle element in one pass or find 3rd element from end of the linkedlist  using Tortoise and hare algorithm
    Linkedlist.prototype.middleElement = function(){
        var fast = this.head;
        var slow = this.head;
        while(fast.next != null && fast.next.next != null){
            slow = slow.next;
            fast = fast.next.next;
        }
        console.log(slow.data);

    }
    // Find the linked list has a loop or not using Tortoise and hare algorithm
    Linkedlist.prototype.middleElement = function() {
        Linkedlist.prototype.loop = function () {
            var fast = this.head;
            var slow = this.head;
            while (fast.next != null && fast.next.next != null) {
                slow = slow.next;
                fast = fast.next.next;
            }
            if (slow.data === fast.data) {
                return console.log('linkedlist is in loop');
            }
            else {
                return false;
            }

        }
    }
    var s1 = new Linkedlist();
    s1.append(10);
    s1.append(12);
    s1.prepand(9);
    s1.prepand(7);
    s1.prepand(6);
    console.log(s1);
    console.log(s1.size());

    console.log(s1);
    s1.middleElement();
    console.log(s1.loop());
</script>
</body>
</html>